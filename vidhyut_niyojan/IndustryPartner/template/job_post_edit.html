{% extends 'base.html' %}
{%load static%}
{% block content %}

            <!-- start page content -->
            <div class="page-content-wrapper">
                <div class="page-content">
                    <div class="page-bar">
                        <div class="page-title-breadcrumb">
                            <div class=" pull-left">
                                <div class="page-title">Job Post</div>
                            </div>
                            
                        </div>
                    </div>

                    <!-- start new student list -->
                    <div class="row">
                        <div class="col-md-12 col-sm-12">
                            <div class="card card-box">
                                <div class="card-head">
                                    <header>Edit Job Post</header>
                                </div>
                                <!--Required filed-->
                                <style>
                                    .required:after {
                                        content:" *";
                                        color: red;
                                        font-size: 15px;
                                    }
                                </style>
                                <div class="card-body " id="bar-parent">
                                    <form method = "POST" action ="{% url 'IndustryPartner:job_posting_update' id=jobpostid.id %}">
                                        {% csrf_token %}
                                        <div class="row">
                                            <div class="col-md-12 col-sm-6">
                                                <div class="form-group">
                                                    <label for="simpleFormEmail">Job name :<label class="required" ></label></label>
                                                    <input type="text" class="form-control" id="simpleFormEmail"
                                                        placeholder="Enter Job Type" style="border-radius: 50px;" name = "Job_Name" value="{{jobpostid.Job_Name}}" required>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label for="simpleFormEmail">Job type :<label class="required" ></label></label>
                                                    <select type="text" class="form-control" id="simpleFormEmail"
                                                        placeholder="Enter Job Type" style="border-radius: 50px;" name = "Job_type"  required>
                                                        
                                                        <option value="Full Time" {% if jobpostid.Job_type == "Full Time"  %}selected{% endif %}>Full Time</option>
                                                        <option value="Part Time" {% if jobpostid.Job_type == "Part Time"  %}selected{% endif %}>Part Time</option>
                                                        <option value="Contractual Bases" {% if jobpostid.Job_type == "Contractual Bases"  %}selected{% endif %}>Contractual Bases</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label for="simpleFormEmail">Job salary :<label class="required" ></label></label>
                                                    <input type="number" class="form-control" id="simpleFormEmail"
                                                        placeholder="Enter Job salary" style="border-radius: 50px;"name = "Job_salary" value="{{jobpostid.Job_salary}}" required>
                                                </div>
                                            </div>
                                       
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label for="simpleFormEmail">Skills :<label class="required" ></label></label>
                                                    <input type="text"  class="form-control" id="simpleFormEmail"
                                                        placeholder="Enter Skills" style="border-radius: 50px;" name = "Requirements" value="{{jobpostid.Requirements}}" required> 
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-6" >
                                                <div class="form-group" >
                                                    <label for="simpleFormEmail" >Number Of Requirements :<label class="required" ></label></label>
                                                    <input type="number" class="form-control" id="simpleFormEmail" value="{{jobpostid.Number_Of_Requirements}}"
                                                        placeholder="Enter Number Of Requirements" style="border-radius: 50px;" name = "Number_Of_Requirements" required>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-6" >
                                                <div class="form-group" >
                                                    <label for="simpleFormEmail" >Qualification :<label class="required" ></label></label>
                                                    <select type="text" class="form-select" id="simpleFormEmail" 
                                                        placeholder="Enter required Qualification" style="border-radius: 50px;" name = "qualification" required>
                                                        <option value="10 to Below" {% if jobpostid.Qualification == "10 to Below"  %}selected{% endif %} >10 to Below</option>
                                                        <option  value="10 pass" {% if jobpostid.Qualification == "10 pass"  %}selected{% endif %}>10 pass</option>
                                                        <option  value="12 pass" {% if jobpostid.Qualification == "12 pass"  %}selected{% endif %}>12 pass</option>
                                                        <option  value="ITI" {% if jobpostid.Qualification == "ITI"  %}selected{% endif %}>ITI</option>
                                                        <option  value="Diploma" {% if jobpostid.Qualification == "Diploma"  %}selected{% endif %}>Diploma</option>
                                                        <option  value="Graduate" {% if jobpostid.Qualification == "Graduate"  %}selected{% endif %}>Graduate</option>
                                                        <option  value="Post-Graduate" {% if jobpostid.Qualification == "Post-Graduate"  %}selected{% endif %}>Post-Graduate</option>
                                                    </select>

                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-6" >
                                                <div class="form-group" >
                                                    <label for="simpleFormEmail" >Experience(In Year) :<label class="required" ></label></label>
                                                    <input type="number" class="form-control" id="simpleFormEmail" value="{{jobpostid.Experience}}"
                                                        placeholder="Enter Required Experience" style="border-radius: 50px;" name = "experience" required>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label for="simpleFormEmail">Job Start Date(optional) :</label></label>
                                                    <input type="date" class="form-control" id="simpleFormEmail" value="{{jobpostid.Job_Add_Date|date:'Y-m-d'}}"
                                                        placeholder="Enter Job Add Date" style="border-radius: 50px;" name = "Job_Add_Date" >  
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label for="simpleFormEmail">Job Ending Date(optional) :</label></label>
                                                    <input type="date"  class="form-control" id="simpleFormEmail" value="{{jobpostid.Job_Ending_Date|date:'Y-m-d'}}"
                                                        placeholder="Enter Job Ending Date" style="border-radius: 50px;" name = "Job_Ending_Date" >
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <div class="form-group">
                                                        <label for="simpleFormEmail"> Country :<label class="required" ></label></label>
                                                        
                                                        <select id="selectcountry" name="country" style="border-radius: 50px;" class="form-select" onchange="myCountry()">
                                                            <option value="">Select Country</option>
                                                            {% for x in countries %}
                                                            
                                                            <option value="{{x.id}}">{{x.Country_Name}}</option>
                                                            {% endfor %}
                                                        </select>
                                                        
                                                    </div>
                                                </div>
                                                <div class="col-sm-4">
                                                    <div class="form-group">
                                                        <label for="simpleFormEmail"> State :<label class="required" ></label></label>
                                                        <select id="countrystate" class="form-select" style="border-radius: 50px;" name="state" onchange="myFunction()">
                                                            <option value="">Select State</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-4">
                                                    <div class="form-group">
                                                        <label for="simpleFormEmail">City :<label class="required" ></label></label>
                                                        <select id="statewisecity" name="city" style="border-radius: 50px;" class="form-select" value="{{District_Name}}" placeholder="Enter district Name " name ="DistrictName" required>
                                                            <option value="">Select City</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12 col-sm-6">
                                                <div class="form-group">
                                                    <label for="simpleFormEmail">Job Description :<label class="required" ></label></label>
                                                    <textarea  id="simpleFormEmail"  class="form-control" rows="7" class="form-control"   cols="245"
                                                        placeholder="Enter Job Description" name = "Job_Description" required>{{jobpostid.Job_Description}}</textarea>
                                                </div>
                                            </div>
                                            <center>
                                                <div class="col-md-3">
                                                    <button type="submit" class="btn btn-primary">Submit</button> 
                                                    <a href = "{% url 'IndustryPartner:job_posting_list' %}"><button type="button" class="btn btn-danger">Cancel</button><br></a>
                                                </div>
                                            </center>
                                        </div>
                                    </form>
                                </div>
                                <script>
                                    function myFunction() { 
                                        var stateinfo = document.getElementById("countrystate").value ;
                                        console.log('stateinformation',stateinfo);
                                        output = ""
                                        $.ajax({
                                            type: "POST",
                                            url: '/ip/get_city/',
                                            data: {
                                                'stateinfo': stateinfo,
                                                'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
                                            },
                                            
                                            success: function(response) {
                                                $("#statewisecity").empty();
                                                x = response.statewisecity
                                                console.log('print new data',x)
                        
                                                var select = document.getElementById('statewisecity');
                                                var option;
                                                for (var i = 0; i < x.length; i++) {
                        
                                                    option = document.createElement('option');
                                                    option.text = x[i]["City_Name"];
                                                    option.id = x[i]['id']
                                                    select.add(option);
                                                }
                                            },
                                        });
                        
                                    }
                        
                                </script>
                        
                        
                                <script>
                                    function myCountry() {
                                        var countryinfo = document.getElementById("selectcountry").value;
                        
                                        console.log(countryinfo);
                                        output = ""
                                        $.ajax({
                                            type: "POST",
                                            url: '/ip/get_state/',
                                            data: {
                                                'countryinfo': countryinfo,
                                                'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
                                            },
                                            
                                            success: function(response) {
                                                
                                             
                                                $("#countrystate").empty();
                                            
                                                newvalue = response.countrystate
                        
                                                var select = document.getElementById('countrystate');
                                                var option;
                                            
                                                for (var i = 0; i < newvalue.length; i++) {
                        
                                                    option = document.createElement('option');
                                                    console.log(option);
                                                    option.text = newvalue[i]["State_Name"];
                                                    option.id = newvalue[i]['id']
                                                    select.add(option);
                                                }
                                            },
                                        });
                        
                                    }
                                </script>
                        
                        
                                <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
                        
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
       {% endblock %} 